<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <base href="/"></base>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
  </head>

  <body ng-app="musicApp">

    <nav class="navbar navbar-fixed-top navbar-inverse">
      <div class="container">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
          </ul>
      </div>
    </nav>

    <br>
    <br>
    <br>

    <div class="container-fluid">

      <div class="row">

        <div class="col-md-2" id="queue">
          <h4>Search YouTube</h4>
            <div class="row" style="overflow-x:hidden; height:640px; width:210px overflow: auto" >
              <form action="#" style="margin-top:5px; margin-left:12px">
                <input type="text" id="search" placeholder="Keywords" autocomplete="on" style="width:190px"/>
                <input type="submit" value="Search" style="margin-top:3px">
              </form>
                <div class="thumbnails">

                </div>
            </div>

        </div>

        <div ng-view class="col-md-7"></div>

        <div class="col-md-3" id="chat" ng-controller="chatcontroller">


          <div style="height:600px; overflow-x:hidden; width:330px; overflow: auto">

            <table class="table table-striped">
              <thead>
                <tr>
                  <th><h4>Messages</h4></th>
                </tr>
              </thead>
              <tbody>
                <tr style="word-wrap: break-word" ng-repeat="msg in messages track by $index">
                  <!-- <td>Song Name</td> -->
                  <td>USER:</td>
                  <td>{{msg}}</td>
                  <!-- <td>Artist</td> -->
                </tr>
              </tbody>
            </table>

      </div>
            <div class="row">
               <form style="margin-top:5px; margin-left:22px">
                <input ng-model='message' type="text" placeholder="Enter Message" autocomplete="on" style="width:180px"/>
                <button type="button" ng-click='send(message)' style="margin-top:3px">Send</button>
              </form>
            </div>
        </div>

      </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0-rc.2/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0-rc.2/angular-route.js"></script>

    <script>
      var socket = io.connect('http://localhost:3000');
      socket.on('connect', function(data){
        socket.emit('message', 'hello world');
      });

      // $('.messages').on("submit", function(msg){
      //   event.preventDefault()
      //   socket.emit('send', $('#message').val());
      // })

      // socket.on('sent', function(data){
      //   var message = '<li style="list-style-type: none">'+data+'</li>';
      //   $('.display').append(message)
      // })

      angular.module('chat', [])

      .controller('chatcontroller', function($scope){


        $scope.messages = [];

        $scope.send = function(msg){
          console.log(msg);
          socket.emit('send', msg)
        }

        socket.on('sent', function(data){
          $scope.$apply(function() {
            $scope.messages.push(data);
          })
          console.log($scope.messages)
          //var message = '<li style="list-style-type: none">'+data+'</li>';
          //$('.display').append(message)
        })
      })

    </script>
    <script src="music.js"></script>
    <!-- <script src="youtube.js"></script> -->
    <script src="search.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=init"></script>
    <!-- <script src="script.js"></script> -->
  </body>
</html>



